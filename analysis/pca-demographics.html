<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,minimum-scale=1">

  <title>Analysis of Principal Components x Demographic Factors</title>
  <meta name="description" content="        Analysis of Principal Components x Demographic Factors    In this notebook, principal components are generated from question topic prevalences and di...">

  <link rel="canonical" href="http://artsengagementproject.site//analysis/pca-demographics.html">
  <link rel="alternate" type="application/rss+xml" title="The Arts Engagement Project at The University of Michigan" href="http://artsengagementproject.site//feed.xml">

  <meta property="og:url"         content="http://artsengagementproject.site//analysis/pca-demographics.html" />
<meta property="og:type"        content="article" />
<meta property="og:title"       content="Analysis of Principal Components x Demographic Factors" />
<meta property="og:description" content="        Analysis of Principal Components x Demographic Factors    In this notebook, principal components are generated from question topic prevalences and di..." />
<meta property="og:image"       content="http://artsengagementproject.site//images/logo/logo.png" />

<meta name="twitter:card" content="summary">


  <script type="application/ld+json">
  {
  "@context": "http://schema.org",
  "@type": "NewsArticle",
  "mainEntityOfPage": "http://artsengagementproject.site//analysis/pca-demographics.html",
  "headline": "Analysis of Principal Components x Demographic Factors",
  "datePublished": "2020-03-30T12:43:10-04:00",
  "dateModified": "2020-03-30T12:43:10-04:00",
  "description": "        Analysis of Principal Components x Demographic Factors    In this notebook, principal components are generated from question topic prevalences and di...",
  "author": {
    "@type": "Person",
    "name": "Gabriel Harp"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Data 100 at UC Berkeley",
    "logo": {
      "@type": "ImageObject",
      "url": "http://artsengagementproject.site/",
      "width": 60,
      "height": 60
    }
  },
  "image": {
    "@type": "ImageObject",
    "url": "http://artsengagementproject.site/",
    "height": 60,
    "width": 60
  }
}

  </script>
  <link rel="stylesheet" href="/assets/css/styles.css">

  <!-- <link rel="manifest" href="/manifest.json"> -->
  <!-- <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#efae0a"> -->
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-TileImage" content="/mstile-144x144.png">
  <meta name="theme-color" content="#233947">

  <!-- Favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="/images/logo/favicon.ico">

  <!-- MathJax Config -->
  <!-- Allow inline math using $ and automatically break long math lines -->
<!-- (mostly) copied from nbconvert configuration -->
<!-- https://github.com/jupyter/nbconvert/blob/master/nbconvert/templates/html/mathjax.tpl -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"] ],
        displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
        processEscapes: true,
        processEnvironments: true
    },
    // Center justify equations in code and markdown cells. Elsewhere
    // we use CSS to left justify single line equations in code cells.
    displayAlign: 'center',
    "HTML-CSS": {
        styles: {'.MathJax_Display': {"margin": 0}},
        linebreaks: { automatic: true },
    },
    
});
</script>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS_HTML' async></script>


  <!-- DOM updating function -->
  <script src="/assets/js/page/dom-update.js"></script>

  <!-- Selectors for elements on the page -->
  <script src="/assets/js/page/documentSelectors.js"></script>

  <!-- Define some javascript variables that will be useful in other javascript -->
  <script>
    const site_basename = '';
  </script>

  <!-- Add AnchorJS to let headers be linked -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.0/anchor.min.js" async></script>
  <script src="/assets/js/page/anchors.js" async></script>

  <!-- Include Turbolinks to make page loads fast -->
  <!-- https://github.com/turbolinks/turbolinks -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turbolinks/5.2.0/turbolinks.js" async></script>
  <meta name="turbolinks-cache-control" content="no-cache">

  <!-- Load nbinteract for widgets -->
  

  <!-- Load Thebelab for interactive widgets -->
  <!-- Include Thebelab for interactive code if it's enabled -->



  <!-- Load the auto-generating TOC (non-async otherwise the TOC won't load w/ turbolinks) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.8.1/tocbot.min.js" async></script>
  <script src="/assets/js/page/tocbot.js"></script>

  <!-- Google analytics -->
  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-44678143-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-44678143-2');
</script>



  <!-- Clipboard copy button -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" async></script>

  <!-- Load custom website scripts -->
  <script src="/assets/js/scripts.js" async></script>

  <!-- Load custom user CSS and JS  -->
  <script src="/assets/custom/custom.js" async></script>
  <link rel="stylesheet" href="/assets/custom/custom.css">

  <!-- Update interact links w/ REST param, is defined in includes so we can use templates -->
  

  <!-- Lunr search code - will only be executed on the /search page -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lunr.js/2.3.6/lunr.min.js" async></script>
  <script>var initQuery = function() {
  // See if we have a search box
  var searchInput = document.querySelector('input#lunr_search');
  if (searchInput === null) {
    return;
  }

  // Function to parse our lunr cache
  var idx = lunr(function () {
    this.field('title')
    this.field('excerpt')
    this.field('categories')
    this.field('tags')
    this.ref('id')

    this.pipeline.remove(lunr.trimmer)

    for (var item in store) {
      this.add({
        title: store[item].title,
        excerpt: store[item].excerpt,
        categories: store[item].categories,
        tags: store[item].tags,
        id: item
      })
    }
  });

  // Run search upon keyup
  searchInput.addEventListener('keyup', function () {
    var resultdiv = document.querySelector('#results');
    var query = document.querySelector("input#lunr_search").value.toLowerCase();
    var result =
      idx.query(function (q) {
        query.split(lunr.tokenizer.separator).forEach(function (term) {
          q.term(term, { boost: 100 })
          if(query.lastIndexOf(" ") != query.length-1){
            q.term(term, {  usePipeline: false, wildcard: lunr.Query.wildcard.TRAILING, boost: 10 })
          }
          if (term != ""){
            q.term(term, {  usePipeline: false, editDistance: 1, boost: 1 })
          }
        })
      });

      // Empty the results div
      while (resultdiv.firstChild) {
        resultdiv.removeChild(resultdiv.firstChild);
      }

    resultdiv.insertAdjacentHTML('afterbegin', '<p class="results__found">'+result.length+' Result(s) found</p>');
    for (var item in result) {
      var ref = result[item].ref;
      if(store[ref].teaser){
        var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<div class="archive__item-teaser">'+
                '<img src="'+store[ref].teaser+'" alt="">'+
              '</div>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      else{
    	  var searchitem =
          '<div class="list__item">'+
            '<article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">'+
              '<h2 class="archive__item-title" itemprop="headline">'+
                '<a href="'+store[ref].url+'" rel="permalink">'+store[ref].title+'</a>'+
              '</h2>'+
              '<p class="archive__item-excerpt" itemprop="description">'+store[ref].excerpt.split(" ").splice(0,20).join(" ")+'...</p>'+
            '</article>'+
          '</div>';
      }
      resultdiv.insertAdjacentHTML('beforeend', searchitem);
    }
  });
};

initFunction(initQuery);
</script>

  <!-- Load JS that depends on site variables -->
  <script src="/assets/js/page/copy-button.js" async></script>

  <!-- Hide cell code -->
  <script src="/assets/js/page/hide-cell.js" async></script>

  <!-- Printing the screen -->
  <!-- Include nbinteract for interactive widgets -->
<script src="https://printjs-4de6.kxcdn.com/print.min.js" async></script>
<script>
printContent = () => {
    // MathJax displays a second version of any math for assistive devices etc.
    // This prevents double-rendering in the PDF output.
    var ignoreAssistList = [];
    assistives = document.querySelectorAll('.MathJax_Display span.MJX_Assistive_MathML').forEach((element, index) => {
        var thisId = 'MathJax-assistive-' + index.toString();
        element.setAttribute('id', thisId);
        ignoreAssistList.push(thisId)
    });

    // Print the actual content object
    printJS({
        printable: 'textbook_content',
        type: 'html',
        css: "/assets/css/styles.css",
        style: "#textbook_content {padding-top: 40px};",
        scanStyles: false,
        targetStyles: ["*"],
        ignoreElements: ignoreAssistList,
        documentTitle: "Made with Jupyter Book"
    })
};

initPrint = () => {
    document.querySelector('#interact-button-print').addEventListener('click', printContent)
}

initFunction(initPrint)
</script>

</head>

  <body>
    <!-- Include the ThebeLab config so it gets reloaded on each page -->
    <script type="text/x-thebe-config">{
    requestKernel: true,
    binderOptions: {
    repo: "YOUR-ORG/YOUR-REPO",
    ref: "gh-pages",
    },
    codeMirrorConfig: {
    theme: "abcdef",
    mode: ""
    },
    kernelOptions: {
    kernelName: "ir",
    path: "content/analysis"
    }
}
</script>

    <!-- .js-show-sidebar shows sidebar by default -->
    <div id="js-textbook" class="c-textbook js-show-sidebar">
      



<nav id="js-sidebar" class="c-textbook__sidebar">
  <a href="https://artsengagementproject.site"><img src="/images/logo/logo.png" class="textbook_logo" id="sidebar-logo" alt="textbook logo" data-turbolinks-permanent/></a>
  <h2 class="c-sidebar__title">The Arts Engagement Project at The University of Michigan</h2>
  <ul class="c-sidebar__chapters">
    
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/intro">
        <a class="c-sidebar__entry"
          href="/intro.html"
        >
          
          Overview
        </a>
      </li>

      
      

      

      
      

      
        

        

        <ul class="c-sidebar__sections">
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/overview/background">
              <a class="c-sidebar__entry"
                href="/overview/background.html"
              >
                
                Background
              </a>
            </li>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/overview/studydesign">
              <a class="c-sidebar__entry"
                href="/overview/studydesign.html"
              >
                
                Study Design
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/overview/studylogistics">
                  <a class="c-sidebar__entry"
                    href="/overview/studylogistics.html"
                  >
                    
                    Study Logistics
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/overview/surveydesign">
                  <a class="c-sidebar__entry"
                    href="/overview/surveydesign.html"
                  >
                    
                    Survey Design
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/overview/datacollection">
                  <a class="c-sidebar__entry"
                    href="/overview/datacollection.html"
                  >
                    
                    Data Collection
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/overview/datadescription">
                  <a class="c-sidebar__entry"
                    href="/overview/datadescription.html"
                  >
                    
                    Data Description
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/overview/presentations">
              <a class="c-sidebar__entry"
                href="/overview/presentations.html"
              >
                
                Presentations
              </a>
            </li>
            
            
          
        </ul>
      

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/insights/insights">
        <a class="c-sidebar__entry"
          href="/insights/insights.html"
        >
          
          Insights
        </a>
      </li>

      
      

      

      
      

      
        

        

        <ul class="c-sidebar__sections">
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/insights/barriers">
              <a class="c-sidebar__entry"
                href="/insights/barriers.html"
              >
                
                Barriers to Involvement
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/barriers/tree">
                  <a class="c-sidebar__entry"
                    href="/insights/barriers/tree.html"
                  >
                    
                    Barriers - Topic Tree
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/barriers/topics">
                  <a class="c-sidebar__entry"
                    href="/insights/barriers/topics.html"
                  >
                    
                    Barriers - Topic Descriptions
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/barriers/dimensions">
                  <a class="c-sidebar__entry"
                    href="/insights/barriers/dimensions.html"
                  >
                    
                    Barriers - Underlying Factors
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/insights/othergrowth">
              <a class="c-sidebar__entry"
                href="/insights/othergrowth.html"
              >
                
                Personal Growth
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/othergrowth/tree">
                  <a class="c-sidebar__entry"
                    href="/insights/othergrowth/tree.html"
                  >
                    
                    Growth - Topic Tree
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/othergrowth/topics">
                  <a class="c-sidebar__entry"
                    href="/insights/othergrowth/topics.html"
                  >
                    
                    Growth - Topic Descriptions
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/othergrowth/dimensions">
                  <a class="c-sidebar__entry"
                    href="/insights/othergrowth/dimensions.html"
                  >
                    
                    Growth - Underlying Factors
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/insights/feel">
              <a class="c-sidebar__entry"
                href="/insights/feel.html"
              >
                
                Emotional Impact
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/feel/tree">
                  <a class="c-sidebar__entry"
                    href="/insights/feel/tree.html"
                  >
                    
                    Emotional Impacts - Topic Tree
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/feel/topics">
                  <a class="c-sidebar__entry"
                    href="/insights/feel/topics.html"
                  >
                    
                    Emotional Impacts - Topic Descriptions
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/feel/dimensions">
                  <a class="c-sidebar__entry"
                    href="/insights/feel/dimensions.html"
                  >
                    
                    Emotional Impacts - Underlying Factors
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/insights/development">
              <a class="c-sidebar__entry"
                href="/insights/development.html"
              >
                
                Developmental Role
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/development/tree">
                  <a class="c-sidebar__entry"
                    href="/insights/development/tree.html"
                  >
                    
                    Developmental Role - Topic Tree
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/development/topics">
                  <a class="c-sidebar__entry"
                    href="/insights/development/topics.html"
                  >
                    
                    Developmental Role - Topic Descriptions
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/insights/role">
              <a class="c-sidebar__entry"
                href="/insights/role.html"
              >
                
                College Experience
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections u-hidden-visually'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/role/tree">
                  <a class="c-sidebar__entry"
                    href="/insights/role/tree.html"
                  >
                    
                    College Experience - Topic Tree
                  </a>
                </li>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/insights/role/topics">
                  <a class="c-sidebar__entry"
                    href="/insights/role/topics.html"
                  >
                    
                    College Experience - Topic Descriptions
                  </a>
                </li>
              
              </ul>
            
            
          
        </ul>
      

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
      
      

      
      
      
      

      
      
      <li class="c-sidebar__chapter" data-url="/analysis/methods">
        <a class="c-sidebar__entry"
          href="/analysis/methods.html"
        >
          
          Analyses
        </a>
      </li>

      
      

      

      
      

      
        

        

        <ul class="c-sidebar__sections">
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/analysis/topics">
              <a class="c-sidebar__entry"
                href="/analysis/topics.html"
              >
                
                Topic Modeling and Interpretation
              </a>
            </li>
            
              
              <ul class='c-sidebar__subsections'>
              
                
                
                
                
                <li class="c-sidebar__subsection" data-url="/analysis/stm-workflow">
                  <a class="c-sidebar__entry"
                    href="/analysis/stm-workflow.html"
                  >
                    
                    Structural Topic Model Workflow
                  </a>
                </li>
              
              </ul>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/analysis/dictionaries">
              <a class="c-sidebar__entry"
                href="/analysis/dictionaries.html"
              >
                
                Dictionaries of Language Patterns
              </a>
            </li>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/analysis/pca-demographics">
              <a class="c-sidebar__entry"
                href="/analysis/pca-demographics.html"
              >
                
                Analysis of Principal Components x Demographic Factors
              </a>
            </li>
            
            
          
            
            

            
            
            
            

            <li class="c-sidebar__section" data-url="/analysis/pca-density-plots">
              <a class="c-sidebar__entry"
                href="/analysis/pca-density-plots.html"
              >
                
                Plots for Principal Components x Demographic Factors
              </a>
            </li>
            
            
          
        </ul>
      

      
    
      
      
        <li class="c-sidebar__divider"></li>
        
  </ul>
  <p class="sidebar_footer"><a href="../LICENSE.html">CC BY-SA 4.0</a> Powered by <a href="https://jupyterbook.org">Jupyter Book</a></p>
</nav>

      
      <div class="c-topbar" id="top-navbar">
  <!-- We show the sidebar by default so we use .is-active -->
  <div class="c-topbar__buttons">
    <button
      id="js-sidebar-toggle"
      class="hamburger hamburger--arrowalt is-active"
    >
      <span class="hamburger-box">
        <span class="hamburger-inner"></span>
      </span>
    </button>
    <div class="buttons">
<div class="download-buttons-dropdown">
    <button id="dropdown-button-trigger" class="interact-button"><img src="/assets/images/download-solid.svg" alt="Download" /></button>
    <div class="download-buttons">
        <a href="/content/analysis/pca-demographics.ipynb" download>
        <button id="interact-button-download" class="interact-button">.ipynb</button>
        </a>
        
        <a id="interact-button-print"><button id="interact-button-download" class="interact-button">.pdf</button></a>
    </div>
</div>


  
  
  
  


</div>

  </div>
  <!-- Empty sidebar placeholder that we'll auto-fill with javascript -->
  <aside class="sidebar__right">
    <header><h4 class="nav__title"><img src="/assets/images/list-solid.svg" alt="Search" />   On this page</h4></header>
    <nav class="onthispage">
    </nav>
  </aside>
  <a href="/search.html" class="topbar-right-button" id="search-button">
    <img src="/assets/images/search-solid.svg" alt="Search" />
  </a>
</div>

      <main class="c-textbook__page" tabindex="-1">
            <div class="c-textbook__content" id="textbook_content">
                  <main class="jupyter-page">
    <div id="page-info"><div id="page-title">Analysis of Principal Components x Demographic Factors</div>
</div>
    <div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In this notebook, principal components are generated from question topic prevalences and disctionary-based estimates of linguistic patterns — and their relationships to various demographic data are explored through statistical tests.</p>
<p>We used a Principle Components Analysis (PCA) in R ('prcomp' function) to integrate multiple variables and conduct an analysis for each question and set of responses. PCA is a multivariate statistical technique that extracts important information about the inter-correlations of multiple variables and re-represents that information as new variables called principle components. These new principle components can then be used to show the similarity and graphic relationships between variables as a way of exploring the data. Because PCA condenses multiple variables into fewer dimensions, the new principle components may also be used to integrate new descriptions of the combined variables. These reified principle components may then be used as covariates to estimate relationships with other variables such as demographic factors.</p>
<p>Twenty-seven dictionary-based variables (LIWC, AIC, and Docuscope) were not relevant and were excluded from the analysis, leaving a total of 221 dictionary-based variables in the PCA. This was in addition to the measures of topic prevalence, which each had different numbers of topic variables depending on the question/response type. In order to remove variables with high numbers of 0s (no observations), we set a 0.3 maximum threshold, leaving variable columns with 70% or more observations in the analysis. The number of responses and variables included for each question in the analysis are provided in Table 1. Because of the different scales used by the different dictionaries and topic measures (for example, topic prevalence is 0-1 while AIC is measured on a scale from 1-7), the PCA was based on a correlation matrix. The data were also centered around zero and rotated.</p>

</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Load-libraries-and-data">Load libraries and data<a class="anchor-link" href="#Load-libraries-and-data"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell tag_remove_output">

<div class="cell border-box-sizing code_cell rendered tag_remove_output">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">broom</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">FactoMineR</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">magrittr</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">emmeans</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="nf">load</span><span class="p">(</span><span class="s">&#39;../data/merged_artsengagement.rda&#39;</span><span class="p">)</span>
<span class="nf">load</span><span class="p">(</span><span class="s">&#39;../data/tidy_questions_best.Rda&#39;</span><span class="p">)</span>
<span class="nf">source</span><span class="p">(</span><span class="s">&#39;../scripts/select_helpers.R&#39;</span><span class="p">)</span>
<span class="nf">load</span><span class="p">(</span><span class="s">&#39;../data/pca_labels.rda&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Subset-demographic-variables">Subset demographic variables<a class="anchor-link" href="#Subset-demographic-variables"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">motiv_demos</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="nf">contains</span><span class="p">(</span><span class="s">&#39;sr_motivation&#39;</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="n">names</span>
<span class="n">identity_demos</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="nf">contains</span><span class="p">(</span><span class="s">&#39;sr_identity&#39;</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="n">names</span>
<span class="n">participation_demos</span> <span class="o">&lt;-</span> <span class="n">df</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="nf">all_arts</span><span class="p">(</span><span class="s">&#39;participation&#39;</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&#39;sr&#39;</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="n">names</span>
<span class="n">real_demos</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;ethnic_group&#39;</span><span class="p">,</span> <span class="s">&#39;sex&#39;</span><span class="p">,</span> <span class="s">&#39;school&#39;</span><span class="p">,</span> <span class="s">&#39;parented&#39;</span><span class="p">,</span> <span class="s">&#39;income&#39;</span><span class="p">,</span> <span class="s">&#39;artsincollege&#39;</span><span class="p">,</span> <span class="s">&#39;hstype&#39;</span><span class="p">,</span> <span class="s">&#39;hssize&#39;</span><span class="p">,</span>
           <span class="s">&#39;hslocation&#39;</span><span class="p">,</span> <span class="s">&#39;hs_arts_freq&#39;</span><span class="p">,</span> <span class="s">&#39;hs_encouragement&#39;</span><span class="p">,</span> <span class="s">&#39;hs_required&#39;</span><span class="p">,</span> <span class="s">&#39;hs_fees&#39;</span><span class="p">,</span>
           <span class="s">&#39;so_childhood1&#39;</span><span class="p">,</span> <span class="s">&#39;so_childhood3&#39;</span><span class="p">,</span> <span class="s">&#39;so_childhood5&#39;</span><span class="p">,</span> <span class="s">&#39;sr_participated&#39;</span><span class="p">,</span>
               <span class="s">&#39;sr_highestdegreeplanned&#39;</span><span class="p">)</span>
<span class="n">demo_groups</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;real_demos&#39;</span><span class="p">,</span><span class="s">&#39;motiv_demos&#39;</span><span class="p">,</span><span class="s">&#39;identity_demos&#39;</span><span class="p">,</span><span class="s">&#39;participation_demos&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Define-helper-functions">Define helper functions<a class="anchor-link" href="#Define-helper-functions"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># Used within the mergeQuestion function to merge variable names</span>
<span class="n">stripnames</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">question</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">data</span> <span class="o">&lt;-</span> <span class="n">data</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="s">&#39;rownums&#39;</span><span class="p">,</span> <span class="nf">starts_with</span><span class="p">(</span><span class="n">question</span><span class="p">))</span>
    <span class="n">varnames</span> <span class="o">&lt;-</span> <span class="nf">names</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
    <span class="n">newnames</span> <span class="o">&lt;-</span> <span class="n">varnames</span>
    <span class="nf">for </span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="nf">seq</span><span class="p">(</span><span class="m">3</span><span class="p">,</span> <span class="nf">length</span><span class="p">(</span><span class="n">varnames</span><span class="p">)))</span> <span class="p">{</span>
        <span class="n">newnames[i]</span> <span class="o">&lt;-</span> <span class="nf">substr</span><span class="p">(</span><span class="n">varnames[i]</span><span class="p">,</span> <span class="nf">gregexpr</span><span class="p">(</span><span class="s">&quot;\\.\\.&quot;</span><span class="p">,</span> <span class="n">varnames[i]</span><span class="p">)</span><span class="n">[[1]][1]</span><span class="m">+2</span><span class="p">,</span> <span class="nf">nchar</span><span class="p">(</span><span class="n">varnames[i]</span><span class="p">))</span>
    <span class="p">}</span>
    <span class="nf">names</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="n">newnames</span>
    <span class="nf">return</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Remove irrelavant variables</span>
<span class="n">stripVars</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">removenames</span> <span class="o">&lt;-</span> <span class="nf">names</span><span class="p">(</span><span class="n">data</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="s">&quot;AIC..Words|AIC..IC_Differentiation|AIC..IC_Integration|AIC..DIAL_Differentiation|AIC..DIAL_Integration|AIC..ELAB_Differentiation|AIC..ELAB_Integration|docuscope..OralCues|docuscope..DialogCues|docuscope..XWordTokens|docuscope..XPunctuationTokens|docuscope..XTokens|LIWC..WC|LIWC..Sixltr|LIWC..Dic|LIWC..WPS|LIWC..swear|LIWC..netspeak|LIWC..assent|LIWC..nonflu|LIWC..filler|LIWC..AllPunc|LIWC..Period|LIWC..Comma|LIWC..Colon|LIWC..SemiC|LIWC..QMark|LIWC..Exclam|LIWC..Dash|LIWC..Quote|LIWC..Apostro|LIWC..Parenth|LIWC..OtherP&quot;</span><span class="p">)))</span>
    <span class="n">data</span> <span class="o">&lt;-</span> <span class="n">data[</span> <span class="p">,</span> <span class="o">!</span><span class="nf">names</span><span class="p">(</span><span class="n">data</span><span class="p">)</span> <span class="o">%in%</span> <span class="n">removenames]</span>
    <span class="nf">return</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># Merges responses between years</span>
<span class="n">mergeQuestion</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">question</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">if </span><span class="p">(</span><span class="nf">substr</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span><span class="m">3</span><span class="p">)</span> <span class="o">==</span> <span class="s">&#39;_&#39;</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">question</span> <span class="o">&lt;-</span> <span class="nf">substr</span><span class="p">(</span><span class="n">question</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="nf">nchar</span><span class="p">(</span><span class="n">question</span><span class="p">))</span>
    <span class="p">}</span>
    <span class="c1"># if you&#39;re aware of other prefixes, add them here</span>
    <span class="n">yrs</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="s">&#39;fl&#39;</span><span class="p">,</span><span class="s">&#39;f1&#39;</span><span class="p">,</span><span class="s">&#39;f2&#39;</span><span class="p">,</span><span class="s">&#39;so&#39;</span><span class="p">,</span><span class="s">&#39;jr&#39;</span><span class="p">,</span><span class="s">&#39;sr&#39;</span><span class="p">,</span><span class="s">&#39;sl&#39;</span><span class="p">)</span>
    <span class="n">data</span><span class="o">$</span><span class="n">rownums</span> <span class="o">&lt;-</span> <span class="nf">seq</span><span class="p">(</span><span class="nf">nrow</span><span class="p">(</span><span class="n">data</span><span class="p">))</span> <span class="c1"># add rownums so resulting data can be re-integrated</span>
    <span class="n">mergeddf</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">()</span>
    <span class="nf">for </span><span class="p">(</span><span class="n">yr</span> <span class="n">in</span> <span class="n">yrs</span><span class="p">)</span> <span class="p">{</span>
        <span class="nf">if </span><span class="p">(</span><span class="n">question</span> <span class="o">==</span> <span class="s">&#39;definition&#39;</span> <span class="o">&amp;&amp;</span> <span class="nf">is.na</span><span class="p">(</span><span class="n">yr</span><span class="p">))</span>
            <span class="n">qyr</span> <span class="o">&lt;-</span> <span class="n">question</span>
        <span class="n">else</span> <span class="nf">if </span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">yr</span><span class="p">))</span>
            <span class="n">next</span>
        <span class="n">else</span> <span class="p">{</span>
            <span class="n">qyr</span> <span class="o">&lt;-</span> <span class="nf">paste0</span><span class="p">(</span><span class="n">yr</span><span class="p">,</span> <span class="s">&#39;_&#39;</span><span class="p">,</span> <span class="n">question</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="nf">if </span><span class="p">(</span><span class="n">data</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="n">qyr</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="n">ncol</span> <span class="o">==</span> <span class="m">0</span><span class="p">)</span> <span class="p">{</span> <span class="n">next</span> <span class="p">}</span>
        <span class="n">tempdf</span> <span class="o">&lt;-</span> <span class="nf">stripnames</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">qyr</span><span class="p">)</span>
        <span class="nf">names</span><span class="p">(</span><span class="n">tempdf</span><span class="p">)</span><span class="n">[2]</span> <span class="o">&lt;-</span> <span class="n">question</span>
        <span class="n">mergeddf</span> <span class="o">&lt;-</span> <span class="nf">bind_rows</span><span class="p">(</span><span class="n">mergeddf</span><span class="p">,</span> <span class="n">tempdf</span><span class="p">)</span>        
    <span class="p">}</span>
    <span class="n">mergeddf</span> <span class="o">&lt;-</span> <span class="n">mergeddf</span><span class="nf">[complete.cases</span><span class="p">(</span><span class="n">mergeddf</span><span class="p">),</span><span class="n">]</span>
    <span class="n">mergeddf</span> <span class="o">&lt;-</span> <span class="n">mergeddf</span> <span class="o">%&gt;%</span> <span class="n">stripVars</span>
    <span class="nf">rownames</span><span class="p">(</span><span class="n">mergeddf</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">()</span>
    <span class="nf">return</span><span class="p">(</span><span class="n">mergeddf</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="ANOVA,-EMMeans-Loop">ANOVA, EMMeans Loop<a class="anchor-link" href="#ANOVA,-EMMeans-Loop"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="n">sig_contrasts.demos</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">()</span>
<span class="n">sig_aov_posthoc</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">()</span>
<span class="nf">dir.create</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span> <span class="n">showWarnings</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
<span class="nf">for</span><span class="p">(</span><span class="n">question</span> <span class="n">in</span> <span class="n">question_names[</span><span class="o">-</span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="o">:</span><span class="m">6</span><span class="p">,</span><span class="m">9</span><span class="o">:</span><span class="m">14</span><span class="p">)</span><span class="n">]</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1"># directories</span>
    <span class="nf">dir.create</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span> <span class="n">question</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span><span class="p">),</span> <span class="n">showWarnings</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
    
    <span class="c1"># data subsetting</span>
    <span class="n">data_subset</span> <span class="o">&lt;-</span> <span class="nf">mergeQuestion</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">question</span><span class="p">)</span>
    <span class="n">data_subset_rows</span> <span class="o">&lt;-</span> <span class="n">data_subset[[1]]</span>
    <span class="n">data_subset</span> <span class="o">&lt;-</span> <span class="n">data_subset[</span><span class="m">-1</span><span class="n">]</span>
    <span class="n">data_subset</span> <span class="o">&lt;-</span> <span class="n">data_subset[</span><span class="m">-1</span><span class="n">]</span>
    <span class="n">percent</span> <span class="o">&lt;-</span> <span class="m">0.4</span>
    <span class="n">data_subset</span> <span class="o">&lt;-</span> <span class="n">data_subset[</span> <span class="nf">lapply</span><span class="p">(</span> <span class="n">data_subset</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="o">==</span><span class="m">0</span><span class="p">)</span> <span class="o">/</span> <span class="nf">length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="n">percent</span> <span class="n">]</span>
                                       
    <span class="c1"># generate principal components</span>
    <span class="n">pd</span> <span class="o">&lt;-</span> <span class="nf">prcomp</span><span class="p">(</span><span class="n">data_subset</span><span class="p">,</span> <span class="n">retx</span><span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>

    <span class="c1"># merge with demographic cols</span>
    <span class="n">pcs</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">rownum</span> <span class="o">=</span> <span class="n">data_subset_rows</span><span class="p">,</span> <span class="n">pd</span><span class="o">$</span><span class="n">x[</span><span class="p">,</span><span class="nf">seq</span><span class="p">(</span><span class="m">5</span><span class="p">)</span><span class="n">]</span> <span class="o">%&gt;%</span> <span class="n">as.data.frame</span><span class="p">)</span>
    <span class="n">rownums</span> <span class="o">&lt;-</span> <span class="n">pcs</span><span class="o">$</span><span class="n">rownum</span> <span class="o">%&gt;%</span> <span class="n">sort</span>
    <span class="n">pcs</span> <span class="o">&lt;-</span> <span class="n">pcs</span> <span class="o">%&gt;%</span> <span class="nf">arrange</span><span class="p">(</span><span class="n">rownum</span><span class="p">)</span>
    <span class="n">pcs</span> <span class="o">&lt;-</span> <span class="n">pcs[</span><span class="m">-1</span><span class="n">]</span>
    <span class="n">demodfpcs</span> <span class="o">&lt;-</span> <span class="nf">bind_cols</span><span class="p">(</span><span class="n">df[rownums</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="s">&#39;key&#39;</span><span class="p">,</span><span class="n">real_demos</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">pcs</span><span class="p">)</span>

    <span class="c1"># weighting by # of responses per respondent</span>
    <span class="c1"># ( each respondent has up to 4 responses per question, and each response is given a weight between 1/4 and 1 )</span>
    <span class="n">resps_by_key</span> <span class="o">&lt;-</span> <span class="n">demodfpcs</span><span class="o">$</span><span class="n">key</span> <span class="o">%&gt;%</span> <span class="n">table</span> <span class="o">%&gt;%</span> <span class="n">as.data.frame</span>
    <span class="nf">names</span><span class="p">(</span><span class="n">resps_by_key</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;key&#39;</span><span class="p">,</span><span class="s">&#39;n&#39;</span><span class="p">)</span>
    <span class="n">resps_by_key</span> <span class="o">%&lt;&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">n</span><span class="o">!=</span><span class="m">0</span><span class="p">)</span>
    <span class="nf">for</span><span class="p">(</span><span class="n">r</span> <span class="n">in</span> <span class="nf">seq</span><span class="p">(</span><span class="nf">nrow</span><span class="p">(</span><span class="n">demodfpcs</span><span class="p">)))</span> <span class="p">{</span>
        <span class="n">nresps</span> <span class="o">&lt;-</span> <span class="n">resps_by_key</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">key</span> <span class="o">==</span> <span class="n">demodfpcs[r</span><span class="p">,</span><span class="n">]</span><span class="o">$</span><span class="n">key</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">.$n</span>
        <span class="n">demodfpcs[r</span><span class="p">,</span> <span class="nf">names</span><span class="p">(</span><span class="nf">select</span><span class="p">(</span><span class="n">demodfpcs</span><span class="p">,</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#39;PC[12345]&#39;</span><span class="p">)))</span><span class="n">]</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="m">1</span><span class="o">/</span><span class="n">nresps</span><span class="p">)</span> <span class="o">*</span>
                                                            <span class="p">(</span><span class="n">demodfpcs[r</span><span class="p">,</span> <span class="nf">names</span><span class="p">(</span><span class="nf">select</span><span class="p">(</span><span class="n">demodfpcs</span><span class="p">,</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#39;PC[12345]&#39;</span><span class="p">)))</span><span class="n">]</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">demodfpcs</span> <span class="o">&lt;-</span> <span class="n">demodfpcs</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="s">&#39;key&#39;</span><span class="p">)</span>
    <span class="n">demodf</span> <span class="o">&lt;-</span> <span class="n">demodfpcs</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#39;PC[12345]&#39;</span><span class="p">))</span>
    <span class="n">pcs</span> <span class="o">&lt;-</span> <span class="n">demodfpcs</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#39;PC[12345]&#39;</span><span class="p">))</span>

    <span class="c1"># analysis</span>
    <span class="nf">for</span><span class="p">(</span><span class="n">p</span> <span class="n">in</span> <span class="nf">seq</span><span class="p">(</span><span class="n">pcs</span><span class="p">))</span> <span class="p">{</span>
        <span class="c1"># creating directories</span>
        <span class="nf">dir.create</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span> <span class="n">question</span><span class="p">,</span> <span class="nf">names</span><span class="p">(</span><span class="n">pcs</span><span class="p">)</span><span class="n">[p]</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span><span class="p">),</span> <span class="n">showWarnings</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
        <span class="nf">dir.create</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span> <span class="n">question</span><span class="p">,</span> <span class="nf">names</span><span class="p">(</span><span class="n">pcs</span><span class="p">)</span><span class="n">[p]</span><span class="p">,</span> <span class="s">&#39;emmeans&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span><span class="p">),</span> <span class="n">showWarnings</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
        <span class="nf">dir.create</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span> <span class="n">question</span><span class="p">,</span> <span class="nf">names</span><span class="p">(</span><span class="n">pcs</span><span class="p">)</span><span class="n">[p]</span><span class="p">,</span> <span class="s">&#39;anova_tukey&#39;</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span><span class="p">),</span> <span class="n">showWarnings</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
        <span class="nf">for</span><span class="p">(</span><span class="n">d</span> <span class="n">in</span> <span class="nf">seq</span><span class="p">(</span><span class="n">demodf</span><span class="p">))</span> <span class="p">{</span>
            <span class="n">temp</span> <span class="o">&lt;-</span> <span class="nf">bind_cols</span><span class="p">(</span><span class="n">pcs[p]</span><span class="p">,</span> <span class="n">demodf[d]</span><span class="p">)</span>
            <span class="nf">names</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;pc&#39;</span><span class="p">,</span><span class="s">&#39;demo&#39;</span><span class="p">)</span>
            <span class="nf">if</span><span class="p">((</span><span class="n">temp</span><span class="o">$</span><span class="n">demo</span> <span class="o">%&gt;%</span> <span class="n">table</span> <span class="o">%&gt;%</span> <span class="n">as.data.frame</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">Freq</span> <span class="o">!=</span> <span class="m">0</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">nrow</span><span class="p">)</span> <span class="o">==</span> <span class="m">1</span><span class="p">)</span> <span class="n">next</span>

            <span class="c1"># emmeans contrasts</span>
            <span class="n">lm.out</span> <span class="o">&lt;-</span> <span class="nf">lm</span><span class="p">(</span><span class="n">pc</span> <span class="o">~</span> <span class="n">demo</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">temp</span><span class="p">,</span> <span class="n">na.action</span> <span class="o">=</span> <span class="n">na.exclude</span><span class="p">)</span>
            <span class="n">em.out</span> <span class="o">&lt;-</span> <span class="nf">emmeans</span><span class="p">(</span><span class="n">lm.out</span><span class="p">,</span> <span class="o">~</span> <span class="n">demo</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">temp</span><span class="p">,</span> <span class="n">weights</span> <span class="o">=</span> <span class="s">&#39;proportional&#39;</span><span class="p">)</span>
            <span class="n">contrast.out</span> <span class="o">&lt;-</span> <span class="nf">contrast</span><span class="p">(</span><span class="n">em.out</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s">&quot;del.eff&quot;</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">tidy</span>

            <span class="n">contrast.out</span><span class="o">$</span><span class="n">p.value</span> <span class="o">%&lt;&gt;%</span> <span class="nf">p.adjust</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s">&#39;holm&#39;</span><span class="p">)</span>
            <span class="n">contrast.out</span> <span class="o">%&lt;&gt;%</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">question_name</span><span class="o">=</span><span class="n">question</span><span class="p">,</span>
                                        <span class="n">PC_num</span> <span class="o">=</span> <span class="nf">paste0</span><span class="p">(</span><span class="s">&#39;PC&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">),</span> 
                                        <span class="n">PC_pos</span> <span class="o">=</span> <span class="n">pca_labels</span> <span class="o">%&gt;%</span> 
                                                  <span class="nf">filter</span><span class="p">(</span><span class="n">question_name</span><span class="o">==</span><span class="n">question</span><span class="p">)</span> <span class="o">%&gt;%</span> 
                                                  <span class="nf">select</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="nf">paste0</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="s">&#39;_pos&#39;</span><span class="p">)))</span> <span class="o">%&gt;%</span>
                                                  <span class="n">pull</span> <span class="o">%&gt;%</span> <span class="n">as.character</span><span class="p">,</span>
                                        <span class="n">PC_neg</span> <span class="o">=</span> <span class="n">pca_labels</span> <span class="o">%&gt;%</span> 
                                                  <span class="nf">filter</span><span class="p">(</span><span class="n">question_name</span><span class="o">==</span><span class="n">question</span><span class="p">)</span> <span class="o">%&gt;%</span> 
                                                  <span class="nf">select</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="nf">paste0</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="s">&#39;_neg&#39;</span><span class="p">)))</span> <span class="o">%&gt;%</span>
                                                  <span class="n">pull</span> <span class="o">%&gt;%</span> <span class="n">as.character</span><span class="p">,</span>
                                        <span class="n">demographic</span> <span class="o">=</span> <span class="nf">names</span><span class="p">(</span><span class="n">demodf</span><span class="p">)</span><span class="n">[d]</span>
                                     <span class="p">)</span>            

            <span class="c1"># anova tukey</span>
            <span class="n">aov.out</span> <span class="o">&lt;-</span> <span class="nf">aov</span><span class="p">(</span><span class="n">pc</span> <span class="o">~</span> <span class="n">demo</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">temp</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">TukeyHSD</span> <span class="o">%&gt;%</span> <span class="n">tidy</span>
            <span class="n">aov.out</span> <span class="o">%&lt;&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="n">term</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">mutate</span><span class="p">(</span><span class="n">question_name</span><span class="o">=</span><span class="n">question</span><span class="p">,</span>
                                        <span class="n">PC_num</span> <span class="o">=</span> <span class="nf">paste0</span><span class="p">(</span><span class="s">&#39;PC&#39;</span><span class="p">,</span><span class="n">p</span><span class="p">),</span> 
                                        <span class="n">PC_pos</span> <span class="o">=</span> <span class="n">pca_labels</span> <span class="o">%&gt;%</span> 
                                                  <span class="nf">filter</span><span class="p">(</span><span class="n">question_name</span><span class="o">==</span><span class="n">question</span><span class="p">)</span> <span class="o">%&gt;%</span> 
                                                  <span class="nf">select</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="nf">paste0</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="s">&#39;_pos&#39;</span><span class="p">)))</span> <span class="o">%&gt;%</span>
                                                  <span class="n">pull</span> <span class="o">%&gt;%</span> <span class="n">as.character</span><span class="p">,</span>
                                        <span class="n">PC_neg</span> <span class="o">=</span> <span class="n">pca_labels</span> <span class="o">%&gt;%</span> 
                                                  <span class="nf">filter</span><span class="p">(</span><span class="n">question_name</span><span class="o">==</span><span class="n">question</span><span class="p">)</span> <span class="o">%&gt;%</span> 
                                                  <span class="nf">select</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="nf">paste0</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="s">&#39;_neg&#39;</span><span class="p">)))</span> <span class="o">%&gt;%</span>
                                                  <span class="n">pull</span> <span class="o">%&gt;%</span> <span class="n">as.character</span><span class="p">,</span>
                                        <span class="n">demographic</span> <span class="o">=</span> <span class="nf">names</span><span class="p">(</span><span class="n">demodf</span><span class="p">)</span><span class="n">[d]</span>
                                     <span class="p">)</span>
            
            <span class="c1"># bind rows</span>
            <span class="nf">options</span><span class="p">(</span><span class="n">warn</span><span class="o">=</span><span class="m">-1</span><span class="p">)</span>
            <span class="n">sig_contrasts.demos</span> <span class="o">%&lt;&gt;%</span> <span class="nf">bind_rows</span><span class="p">(</span><span class="n">contrast.out</span><span class="p">)</span>
            <span class="n">sig_aov_posthoc</span> <span class="o">%&lt;&gt;%</span> <span class="nf">bind_rows</span><span class="p">(</span><span class="n">aov.out</span><span class="p">)</span>
            <span class="nf">options</span><span class="p">(</span><span class="n">warn</span><span class="o">=</span><span class="m">0</span><span class="p">)</span>
            
            <span class="c1"># write csvs</span>
            <span class="nf">write.csv</span><span class="p">(</span><span class="n">contrast.out</span><span class="p">,</span> <span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span><span class="n">question</span><span class="p">,</span><span class="nf">names</span><span class="p">(</span><span class="n">pcs</span><span class="p">)</span><span class="n">[p]</span><span class="p">,</span><span class="s">&#39;emmeans&#39;</span><span class="p">,</span><span class="nf">paste0</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">demodf</span><span class="p">)</span><span class="n">[d]</span><span class="p">,</span><span class="s">&#39;.csv&#39;</span><span class="p">),</span><span class="n">sep</span><span class="o">=</span><span class="s">&#39;/&#39;</span><span class="p">))</span>
            <span class="nf">write.csv</span><span class="p">(</span><span class="n">aov.out</span><span class="p">,</span> <span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span><span class="n">question</span><span class="p">,</span><span class="nf">names</span><span class="p">(</span><span class="n">pcs</span><span class="p">)</span><span class="n">[p]</span><span class="p">,</span><span class="s">&#39;anova_tukey&#39;</span><span class="p">,</span><span class="nf">paste0</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="n">demodf</span><span class="p">)</span><span class="n">[d]</span><span class="p">,</span><span class="s">&#39;.csv&#39;</span><span class="p">),</span><span class="n">sep</span><span class="o">=</span><span class="s">&#39;/&#39;</span><span class="p">))</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="c1"># # write rdas</span>
<span class="nf">save</span><span class="p">(</span><span class="n">sig_contrasts.demos</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="s">&#39;./results/emmeans_contrasts.rda&#39;</span><span class="p">)</span>
<span class="nf">save</span><span class="p">(</span><span class="n">sig_aov_posthoc</span><span class="p">,</span> <span class="n">file</span><span class="o">=</span><span class="s">&#39;./results/anova_tukey.rda&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="jb_output_wrapper }}">
<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[1] 530
[1] 812
[1] 971
[1] 840
[1] 939
</pre>
</div>
</div>
</div>
</div>
</div>

</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="MANOVA-Loop">MANOVA Loop<a class="anchor-link" href="#MANOVA-Loop"> </a></h1>
</div>
</div>
</div>
</div>

<div class="jb_cell">

<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-r"><pre><span></span><span class="c1"># skip aftercollege bc it causes errors (index 7)</span>
<span class="nf">for</span><span class="p">(</span><span class="n">question</span> <span class="nf">in </span><span class="p">(</span><span class="n">question_names[</span><span class="o">-</span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="o">:</span><span class="m">6</span><span class="p">,</span><span class="m">9</span><span class="o">:</span><span class="m">14</span><span class="p">)</span><span class="n">]</span><span class="p">)</span><span class="n">[</span><span class="m">-7</span><span class="n">]</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1"># directories</span>
    <span class="nf">dir.create</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span> <span class="n">question</span><span class="p">,</span> <span class="n">sep</span> <span class="o">=</span> <span class="s">&#39;/&#39;</span><span class="p">),</span> <span class="n">showWarnings</span> <span class="o">=</span> <span class="bp">F</span><span class="p">)</span>
    
    <span class="c1"># data subsetting, PC</span>
    <span class="n">data_subset</span> <span class="o">&lt;-</span> <span class="nf">mergeQuestion</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">question</span><span class="p">)</span>
    <span class="n">data_subset_rows</span> <span class="o">&lt;-</span> <span class="n">data_subset[[1]]</span>
    <span class="n">data_subset</span> <span class="o">&lt;-</span> <span class="n">data_subset[</span><span class="m">-1</span><span class="n">]</span>
    <span class="n">data_subset</span> <span class="o">&lt;-</span> <span class="n">data_subset[</span><span class="m">-1</span><span class="n">]</span>
    <span class="n">percent</span> <span class="o">&lt;-</span> <span class="m">0.4</span>
    <span class="n">data_subset</span> <span class="o">&lt;-</span> <span class="n">data_subset[</span> <span class="nf">lapply</span><span class="p">(</span> <span class="n">data_subset</span><span class="p">,</span> <span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="o">==</span><span class="m">0</span><span class="p">)</span> <span class="o">/</span> <span class="nf">length</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">)</span> <span class="o">&lt;</span> <span class="n">percent</span> <span class="n">]</span>
    <span class="n">pd</span> <span class="o">&lt;-</span> <span class="nf">prcomp</span><span class="p">(</span><span class="n">data_subset</span><span class="p">,</span> <span class="n">retx</span><span class="o">=</span> <span class="kc">TRUE</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>

    <span class="c1"># merge with demographic cols</span>
    <span class="n">pcs</span> <span class="o">&lt;-</span> <span class="nf">data.frame</span><span class="p">(</span><span class="n">rownum</span> <span class="o">=</span> <span class="n">data_subset_rows</span><span class="p">,</span> <span class="n">pd</span><span class="o">$</span><span class="n">x[</span><span class="p">,</span><span class="nf">seq</span><span class="p">(</span><span class="m">5</span><span class="p">)</span><span class="n">]</span> <span class="o">%&gt;%</span> <span class="n">as.data.frame</span><span class="p">)</span>
    <span class="n">rownums</span> <span class="o">&lt;-</span> <span class="n">pcs</span><span class="o">$</span><span class="n">rownum</span> <span class="o">%&gt;%</span> <span class="n">sort</span>
    <span class="n">pcs</span> <span class="o">&lt;-</span> <span class="n">pcs</span> <span class="o">%&gt;%</span> <span class="nf">arrange</span><span class="p">(</span><span class="n">rownum</span><span class="p">)</span>
    <span class="n">pcs</span> <span class="o">&lt;-</span> <span class="n">pcs[</span><span class="m">-1</span><span class="n">]</span>
    <span class="n">demodfpcs</span> <span class="o">&lt;-</span> <span class="nf">bind_cols</span><span class="p">(</span><span class="n">df[rownums</span><span class="p">,</span><span class="nf">c</span><span class="p">(</span><span class="s">&#39;key&#39;</span><span class="p">,</span><span class="n">real_demos</span><span class="p">)</span><span class="n">]</span><span class="p">,</span> <span class="n">pcs</span><span class="p">)</span>

    <span class="c1"># weighting by # of responses per respondent</span>
    <span class="n">resps_by_key</span> <span class="o">&lt;-</span> <span class="n">demodfpcs</span><span class="o">$</span><span class="n">key</span> <span class="o">%&gt;%</span> <span class="n">table</span> <span class="o">%&gt;%</span> <span class="n">as.data.frame</span>
    <span class="nf">names</span><span class="p">(</span><span class="n">resps_by_key</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;key&#39;</span><span class="p">,</span><span class="s">&#39;n&#39;</span><span class="p">)</span>
    <span class="n">resps_by_key</span> <span class="o">%&lt;&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">n</span><span class="o">!=</span><span class="m">0</span><span class="p">)</span>
    <span class="nf">for</span><span class="p">(</span><span class="n">r</span> <span class="n">in</span> <span class="nf">seq</span><span class="p">(</span><span class="nf">nrow</span><span class="p">(</span><span class="n">demodfpcs</span><span class="p">)))</span> <span class="p">{</span>
        <span class="n">nresps</span> <span class="o">&lt;-</span> <span class="n">resps_by_key</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">key</span> <span class="o">==</span> <span class="n">demodfpcs[r</span><span class="p">,</span><span class="n">]</span><span class="o">$</span><span class="n">key</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">.$n</span>
        <span class="n">demodfpcs[r</span><span class="p">,</span> <span class="nf">names</span><span class="p">(</span><span class="nf">select</span><span class="p">(</span><span class="n">demodfpcs</span><span class="p">,</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#39;PC[12345]&#39;</span><span class="p">)))</span><span class="n">]</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="m">1</span><span class="o">/</span><span class="n">nresps</span><span class="p">)</span> <span class="o">*</span>
                                                            <span class="p">(</span><span class="n">demodfpcs[r</span><span class="p">,</span> <span class="nf">names</span><span class="p">(</span><span class="nf">select</span><span class="p">(</span><span class="n">demodfpcs</span><span class="p">,</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#39;PC[12345]&#39;</span><span class="p">)))</span><span class="n">]</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">demodfpcs</span> <span class="o">&lt;-</span> <span class="n">demodfpcs</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="s">&#39;key&#39;</span><span class="p">)</span>
    <span class="n">demodf</span> <span class="o">&lt;-</span> <span class="n">demodfpcs</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#39;PC[12345]&#39;</span><span class="p">))</span>
    <span class="n">pcs</span> <span class="o">&lt;-</span> <span class="n">demodfpcs</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="nf">matches</span><span class="p">(</span><span class="s">&#39;PC[12345]&#39;</span><span class="p">))</span>

    <span class="c1"># manova</span>
    <span class="n">demo_level_nums</span> <span class="o">&lt;-</span> <span class="n">demodf</span> <span class="o">%&gt;%</span> <span class="n">na.omit</span> <span class="o">%&gt;%</span> <span class="nf">sapply</span><span class="p">(</span><span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">)(</span><span class="n">x</span> <span class="o">%&gt;%</span> <span class="n">table</span> <span class="o">%&gt;%</span> <span class="n">as.data.frame</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">Freq</span> <span class="o">!=</span> <span class="m">0</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="n">nrow</span><span class="p">))</span> <span class="o">%&gt;%</span> <span class="n">as.data.frame</span>
    <span class="n">demo_level_nums</span><span class="o">$</span><span class="n">demo</span> <span class="o">&lt;-</span> <span class="nf">rownames</span><span class="p">(</span><span class="n">demo_level_nums</span><span class="p">)</span>
    <span class="nf">names</span><span class="p">(</span><span class="n">demo_level_nums</span><span class="p">)</span> <span class="o">&lt;-</span> <span class="nf">c</span><span class="p">(</span><span class="s">&#39;n&#39;</span><span class="p">,</span><span class="s">&#39;demo&#39;</span><span class="p">)</span>
    <span class="n">filter_list</span> <span class="o">&lt;-</span> <span class="n">demo_level_nums</span> <span class="o">%&gt;%</span> <span class="nf">filter</span><span class="p">(</span><span class="n">n</span> <span class="o">&lt;</span> <span class="m">2</span><span class="p">)</span> <span class="o">%&gt;%</span> <span class="nf">pull</span><span class="p">(</span><span class="n">demo</span><span class="p">)</span>
    <span class="n">man_demodf</span> <span class="o">&lt;-</span> <span class="n">demodf</span> <span class="o">%&gt;%</span> <span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="n">filter_list</span><span class="p">)</span>
    <span class="nf">print</span><span class="p">(</span><span class="nf">nrow</span><span class="p">(</span><span class="n">man_demodf</span><span class="p">))</span>
    <span class="n">man.out</span> <span class="o">&lt;-</span> <span class="nf">manova</span><span class="p">(</span><span class="n">pcs</span> <span class="o">%&gt;%</span> <span class="n">as.matrix</span> <span class="o">~</span> <span class="n">.,</span>
                    <span class="n">data</span><span class="o">=</span><span class="n">man_demodf</span><span class="p">)</span>
                                                     
    <span class="c1"># write csv</span>
    <span class="nf">write.csv</span><span class="p">(</span><span class="nf">tidy</span><span class="p">(</span><span class="n">man.out</span><span class="p">),</span> <span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span><span class="n">question</span><span class="p">,</span><span class="s">&#39;manova_table.csv&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">&#39;/&#39;</span><span class="p">))</span>
    <span class="nf">sink</span><span class="p">(</span><span class="nf">paste</span><span class="p">(</span><span class="s">&#39;./results&#39;</span><span class="p">,</span><span class="n">question</span><span class="p">,</span><span class="s">&#39;manova_output.txt&#39;</span><span class="p">,</span><span class="n">sep</span><span class="o">=</span><span class="s">&#39;/&#39;</span><span class="p">))</span>
    <span class="nf">print</span><span class="p">(</span><span class="n">man.out</span><span class="p">)</span>
    <span class="nf">sink</span><span class="p">()</span>
<span class="p">}</span>
</pre></div>

    </div>
</div>
</div>

</div>
</div>

 


    </main>
    
            </div>
            <div class="c-textbook__footer" id="textbook_footer">
              
<nav class="c-page__nav">
  
    
    

    <a id="js-page__nav__prev" class="c-page__nav__prev" href="/analysis/dictionaries.html">
      〈 <span class="u-margin-right-tiny"></span> Dictionaries of Language Patterns
    </a>
  

  
    

    
    <a id="js-page__nav__next" class="c-page__nav__next" href="/analysis/pca-density-plots.html">
      Plots for Principal Components x D... <span class="u-margin-right-tiny"></span> 〉
    </a>
  
</nav>

              <footer>
  <p class="footer">This page is created and maintained by <a href="https://github.com/gharp">Gabriel Harp</a></p>
</footer>

            </div>

        </div>
      </main>
    </div>
  </body>
</html>
